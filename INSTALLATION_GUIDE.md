## SMS001 - Installation Guide (Windows)

This guide helps you install and run the system on a new Windows PC with only basic IT knowledge. Follow the steps in order. All commands are for Windows PowerShell.

### 1) Prerequisites (Install These First)

- **PHP 8.2+** and **Composer**: PHP runtime and dependency manager
  - Install PHP 8.2+ (e.g., via `winget`):
    - Command (PowerShell as Administrator):
      ```powershell
      winget install --id=PHP.PHP.8.2 --source winget
      ```
  - Install Composer from `https://getcomposer.org/Composer-Setup.exe`
- **Node.js 18+** and **npm**: for frontend assets (Vite)
  - Download from `https://nodejs.org/en/download/` (LTS recommended)
- **MySQL Server 8+** (or MariaDB 10.6+): database
  - Download MySQL from `https://dev.mysql.com/downloads/installer/`
  - Ensure you know the DB host, port, username, and password (default: host `127.0.0.1`, port `3306`)
- **Redis**: for queues and caching performance
  - Windows options:
    - Use Memurai Community: `https://www.memurai.com/` (compatible with Redis protocol)
    - OR use WSL2 and install Redis inside Linux (advanced)
  

### 2) Get the Source Code

Choose one method.

- Download ZIP → extract to a folder, then:
  ```powershell
  cd <path-to-extracted-folder>\SMS
  ```

### 3) Install PHP and Node Dependencies

Run these inside the project folder (`SMS`).

```powershell
composer install
npm install
```

If Composer or npm are not recognized, ensure they were installed and restart PowerShell.

### 4) Create and Edit the .env File

Copy the example environment file and generate the app key:

```powershell
copy .env.example .env
php artisan key:generate
```

Open `.env` in a text editor and update these values:

- Basic app config:
  ```
  APP_NAME="SMS001"
  APP_ENV=local
  APP_KEY=base64:...           # already generated by key:generate
  APP_DEBUG=true
  APP_URL=http://127.0.0.1:8000
  ```

- Database settings (match your MySQL installation):
  ```
  DB_CONNECTION=mysql
  DB_HOST=127.0.0.1
  DB_PORT=3306
  DB_DATABASE=sms001
  DB_USERNAME=root
  DB_PASSWORD=           # set if you created a password in MySQL installer
  ```

- Queue and cache :
  ```
  QUEUE_CONNECTION=redis      
  CACHE_STORE=redis               
  SESSION_DRIVER=redis
  ```

- Broadcasting / Realtime (optional but recommended):
  - If using Laravel Reverb (bundled):
    ```
    BROADCAST_CONNECTION=reverb
    REVERB_APP_ID=local-app-id
    REVERB_APP_KEY=local-app-key
    REVERB_APP_SECRET=local-app-secret
    REVERB_HOST=127.0.0.1
    REVERB_PORT=8080
    REVERB_SCHEME=http
    ```
  - If you will not use realtime features now, you can skip these.

- Email notifications (SMTP):
  - Example using Gmail (requires 2FA + App Password):
    ```
    MAIL_MAILER=smtp
    MAIL_HOST=smtp.gmail.com
    MAIL_PORT=587
    MAIL_USERNAME=yourgmail@gmail.com
    MAIL_PASSWORD=your_app_password_here
    MAIL_ENCRYPTION=tls
    MAIL_FROM_ADDRESS=yourgmail@gmail.com
    MAIL_FROM_NAME="SMS001"
    ```
  - Example using Mailtrap (for testing):
    ```
    MAIL_MAILER=smtp
    MAIL_HOST=sandbox.smtp.mailtrap.io
    MAIL_PORT=2525
    MAIL_USERNAME=your_mailtrap_username
    MAIL_PASSWORD=your_mailtrap_password
    MAIL_ENCRYPTION=tls
    MAIL_FROM_ADDRESS=no-reply@example.com
    MAIL_FROM_NAME="SMS001"
    ```
  - Make sure the queue worker is running to send queued emails: `php artisan queue:work`

Save the `.env` file when done.

### 5) Prepare the Database

Create the database `sms001` in MySQL (or choose another name and update `.env`). Options:

- Using MySQL command line:
  ```powershell
  mysql -u root -p -e "CREATE DATABASE IF NOT EXISTS sms001 CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"
  ```

- Or use MySQL Workbench / phpMyAdmin to create a schema named `sms001`.

### 6) Option A — Fresh Migrate and Seed (Recommended for New Installs)

Run database migrations and seed default users.

```powershell
php artisan migrate --force
php artisan db:seed --force
```

This creates three default users you can use to log in:

- admin → email: `admin@gmail.com` | password: `admin#12345`
- manager1 → email: `manager1@gmail.com` | password: `mang#12345`
- staff1 → email: `staff1@gmail.com` | password: `staff#12345`

### 7) Option B — Import Existing Sample Database (Trial Run)

If you want to try with sample data, import `sms011.sql` instead of migrating:

- Using MySQL command line:
  ```powershell
  mysql -u root -p sms001 < sms011.sql
  ```

- Using MySQL Workbench / phpMyAdmin:
  - Open the `sms001` database
  - Choose Import, select `sms011.sql`, and run

Note: If you import `sms011.sql`, you may skip migrations. Ensure user accounts exist; otherwise, run only the user seeder:

```powershell
php artisan db:seed --class=Database\\Seeders\\UserSeeder --force
```


### 8) Build Frontend Assets (Development)

In one PowerShell window:

```powershell
npm run dev
```

For a production build:

```powershell
npm run build
```

### 9) Start the Application Server

In a new PowerShell window (inside the project folder):

```powershell
php artisan serve
```

Open your browser at `http://127.0.0.1:8000` and log in using one of the accounts above.

### 10) Run the Queue Worker (Background Jobs)

Open another PowerShell window and run:

```powershell
php artisan queue:work
```

If you installed Redis and set `QUEUE_CONNECTION=redis`, ensure Redis (or Memurai) is running first. For `database` driver, no extra service is needed.

### 11) Start Realtime Server (Optional - Reverb)

If you plan to use realtime notifications and broadcasting:

```powershell
php artisan reverb:start
```

Ensure the `.env` Broadcast/Reverb settings are set as in step 4.

### 13) (Optional) Scheduler for Automatic Tasks

To run scheduled tasks continuously during development:

```powershell
php artisan schedule:work
```

For production, set up Windows Task Scheduler or a service to run `php artisan schedule:run` every minute.

### 14) Troubleshooting

- If pages show errors about missing tables, re-check DB settings in `.env` and run:
  ```powershell
  php artisan migrate --force
  ```
- If login fails, verify the seeded users exist:
  ```powershell
  php artisan tinker
  >>> App\Models\User::pluck('email')
  ```
- If assets don’t load, keep `npm run dev` running or run `npm run build`.
- If queues don’t process, ensure `php artisan queue:work` is active and `.env` `QUEUE_CONNECTION` is correct.

### 15) Summary of Common Commands

```powershell
# Install deps
composer install
npm install

# Env & key
copy .env.example .env
php artisan key:generate

# Database
php artisan migrate --force
php artisan db:seed --force
# OR import sample
mysql -u root -p sms001 < sms011.sql

# App & assets
php artisan storage:link
npm run dev
php artisan serve

# Background workers
php artisan queue:work
php artisan reverb:start
php artisan schedule:work
```

You’re ready to use SMS001 locally. 


